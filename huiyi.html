<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="js/main.js" defer></script>
    <link rel="stylesheet" href="css/main.css" />
    <title>慕雨青檐 - 拾叶集</title>
    <style>
        /* 小花飘落效果 - 更新后样式 */
        .petal {
            position: fixed;
            top: -10%;
            z-index: 9999;
            color: rgba(255, 255, 255, 0.9); /* 提高透明度 */
            text-shadow: 0 0 8px rgba(255, 255, 255, 0.5); /* 添加光晕效果 */
            user-select: none;
            pointer-events: none;
            font-size: 1.2rem;
            animation: fall linear forwards;
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.7)); /* 添加投影 */
        }

        @keyframes fall {
            to {
                transform: translateY(110vh) rotate(720deg);
                opacity: 0.2; /* 下落过程中逐渐变淡 */
            }
        }

        /* 全局背景容器 */
        body {
            position: relative;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* 竹林背景层 */
        body::before {
            content: '';
            position: fixed;
            top: -10%; /* 扩展顶部区域 */
            left: -10%;
            width: 120%;
            height: 120%;
            z-index: -1;
            background: 
                linear-gradient(rgba(232,245,233,0.3), rgba(210,228,209,0.5)), /* 调整颜色滤镜 */
                url('assets/images/bamboo.png') center/cover no-repeat;
            filter: blur(1px); /* 微模糊提升可读性 */
        }

        /* 内容保护层 */
        body::after {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255,255,255,0.3); /* 调整透明度 */
            mix-blend-mode: screen; /* 混合模式保留背景纹理 */
            z-index: 0;
            pointer-events: none;
        }

        /* 调整现有元素层级 */
        .header, 
        .nav-menu, 
        .memory-background {
            position: relative;
            z-index: 1;
        }

        /* 响应式优化 */
        @media (max-width: 768px) {
            body::before {
                background-size: auto 100%; /* 移动端垂直适配 */
                left: -20%;
                width: 140%;
            }
            
            body::after {
                background: rgba(255,255,255,0.7); /* 调整移动端透明度 */
            }
        }
		/* 时光记忆背景图样式 */
			.memory-background {
				position: relative;
				width: 100%;
				background-image: url('assets/images/111.jpg');
				background-size: cover;
				background-position: center;
				background-repeat: no-repeat;
				background-attachment: local; /* 跟随内容滚动 */
				z-index: 1; /* 确保在气球下方 */
			}
	
			/* 为内容添加半透明遮罩（可选） */
			.memory-content {
				position: relative;
				background-color: rgba(255, 255, 255, 0.7); /* 半透明白色遮罩 */
				padding: 20px;
				border-radius: 8px;
			}
    </style>
</head>
<body>
    <!-- 背景遮罩层 -->
    <div class="background-overlay"></div>

    <audio id="bg-music" loop>
        <source src="assets/music/rain.mp3" type="audio/mpeg">
        您的浏览器不支持音频播放
    </audio>

    <!-- 标题区 -->
    <header class="header">
        <h1 class="main-title">慕雨青檐</h1>
        <div class="subtitle">2017-2025 周末特快列车</div>
    </header>

    <!-- 导航菜单 -->
    <nav class="nav-menu">
        <a href="#" class="nav-item" id="music-control">听雨卷</a>
        <a href="huiyi.html" class="nav-item">拾叶集</a>
        <a href="xiangyaoshuodehua.html" class="nav-item">檐铃语</a>
        <a href="guanyunge.html" class="nav-item">观云阁</a>
        <a href="about.html" class="nav-item">关于</a>
    </nav>

    <!-- 照片区 -->
    <section class="memory-background">
        <div class="memory-content">
            <h2>时光记忆</h2>

            <!-- 按钮区域 -->
            <div class="memory-buttons">
                <button class="memory-btn active" data-period="junior">初中</button>
                <button class="memory-btn" data-period="senior">高中</button>
                <button class="memory-btn" data-period="university">大学</button>
            </div>

            <!-- 初中时光内容 -->
            <div class="memory-section" id="junior-memory">
                <h3>初中时光</h3>
                <div class="photo-grid">
                    <!-- 初中照片内容保持不变 -->
                    <div class="photo-item">
                        <img src="assets/images/photo2.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo10.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo20.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo21.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo22.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo23.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo24.jpg" alt="初中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo46.jpg" alt="初中记忆">
                    </div>
                </div>
            </div>

            <!-- 高中时光内容 -->
            <div class="memory-section" id="senior-memory" style="display: none;">
                <h3>高中时光</h3>
                <div class="photo-grid">
                    <!-- 高中照片内容保持不变 -->
                    <div class="photo-item">
                        <img src="assets/images/photo17.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo25.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo31.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo32.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo33.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo34.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo35.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo36.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo37.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo38.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo40.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo41.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo42.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo43.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo44.jpg" alt="高中记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo45.jpg" alt="高中记忆">
                    </div>
                </div>
            </div>

            <!-- 大学时光内容 -->
            <div class="memory-section" id="university-memory" style="display: none;">
                <h3>大学时光</h3>
                <div class="photo-grid">
                    <!-- 大学照片内容保持不变 -->
                    <div class="photo-item">
                        <img src="assets/images/photo1.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo9.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo11.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo13.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo15.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo18.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo27.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo28.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo29.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo30.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo47.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo56.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo55.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo64.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo65.jpg" alt="大学记忆">
                    </div>
                    <div class="photo-item">
                        <img src="assets/images/photo66.jpg" alt="大学记忆">
                    </div>
                </div>
            </div>
            <p>我们的故事并未写完，期待后续...</p>
        </div>
    </section>

    <!-- 弹窗结构 -->
    <div id="memory-modal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h3 class="modal-title"></h3>
            <p class="modal-text"></p>
        </div>
    </div>

    <script>
        // 小花飘落效果
        function createPetals() {
            const petals = ['❀', '✿', '❁', '✾', '❃', '🌸', '💮'];
            const petalCount = 30;
            
            for (let i = 0; i < petalCount; i++) {
                setTimeout(() => {
                    const petal = document.createElement('div');
                    petal.innerHTML = petals[Math.floor(Math.random() * petals.length)];
                    petal.classList.add('petal');
                    
                    // 随机位置
                    petal.style.left = Math.random() * 100 + 'vw';
                    
                    // 随机动画持续时间 (5-15秒)
                    const duration = 5 + Math.random() * 10;
                    petal.style.animationDuration = duration + 's';
                    
                    // 随机延迟 (0-5秒)
                    petal.style.animationDelay = Math.random() * 5 + 's';
                    
                    // 随机大小
                    const size = 0.5 + Math.random() * 1.5;
                    petal.style.fontSize = size + 'rem';
                    
                    // 随机透明度
                    petal.style.opacity = 0.5 + Math.random() * 0.5;
                    
                    document.body.appendChild(petal);
                    
                    // 动画结束后移除花瓣
                    setTimeout(() => {
                        petal.remove();
                    }, duration * 1000);
                }, i * 300); // 每隔300ms创建一个新花瓣
            }
            
            // 每隔一段时间重新创建花瓣
            setTimeout(createPetals, petalCount * 300 + 5000);
        }
        
        // 页面加载后开始花瓣动画
        window.addEventListener('load', createPetals);
    </script>
</body>
</html>